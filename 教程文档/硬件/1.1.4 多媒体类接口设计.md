# 多媒体类接口设计

## 〇.背景

本文所属目录层次为：

```
-> 1.硬件设计
	-> 1.原理图设计
		-> 4.多媒体类接口设计
```

主要介绍A13的LCD接口，摄像头接口，音频接口，TV，以及USB Host，OTG接口。

## 一.A13 LCD/TV 控制器 及 原理图设计

### TCON框图

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/8882894.jpg)
上图是A13的LCD/TV控制器框图，可见在其内部是支持LCD，LVDS，和CVBS的
然而实际的引脚中只有LCD接口被明确标识，还有一个疑似CVBS输出引脚的NC引脚Pin99（该引脚在R8芯片中为TV输出）。
所以在设计中引出LCD接口，TV接口也预留引出，待测试是否可用。

### LCD接口设计

A13支持多种LCD接口：

1. **RGB接口**
	1. 并行
	2. 串行
	3. CCIR656
2. **CPU/I80接口**
	1. 并行RGB666
	2. 并行RGB565
	3. 串行RGB666
	4. 串行RGB565

在设计时考虑到LCD屏幕购买的便捷性，选用最通用的**40P 并行RGB LCD**屏幕。
![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/96509119.jpg)

如上图所示，通用40P LCD自带 **led背光** 和 **四线电阻触摸**，非常适合显示及交互。
A13也是支持四线电阻触摸功能的，可以进行两点触摸检测。

**4.3寸 RGB屏幕和 OV7670摄像头模组**

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/601811.jpg)

### LCD转VGA设计

考虑到有些应用需要使用显示器，所以额外设计了LCD转VGA的转接小板：
![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/24736301.jpg)
**GM7123** 是一款频率 330MHz 的 3 通道 10 位高速视频 DAC 芯片，
兼容 RS-343A/RS-170标准差分输出，输出电流范围是 2mA～26mA。
输入兼容 TTL 电平，内部基准 1.23V，单电源 3.3V 供电，采用 LQFP48 封装。
该芯片可应用于：数字视频系统（ **1600×1200@100Hz**）；高分辨率彩色图像；数字射频调制；图像处理；仪器和视频信号重建等。

简单来说，GM7123就是把数字化的RGB数据转成了VGA信号里模拟的RGB信号，是一个高速DAC转换器。
对于分辨率不高，色深较浅的应用，甚至可以使用电阻分压来完成RGB LCD转VGA信号。

## 二.摄像头接口设计

A13的CMOS Sensor Interface（**CSI**）支持

1. 8位输入数据
2. NTSC/PAL的CCIR656
3. 解析数据到RGB或YCbCr平面
4. etc.

这里选择了常用的 **OV7670**摄像头模组 （30W像素）的引脚定义，  
该引脚定义也 适用于高分辨率的**OV2640**模组（200W像素）等，只是核心电压有差别，可以通过调整PMU的LDO输出电压来适配。  

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/30763879.jpg)

## 三.音频，TV接口设计

A13自带立体声音频编码解码器 以及 耳机功放，具有以下特性：

1. 内置24位DAC
2. 内置24位ADC录音
3. 支持48K,44.1K采样
4. 支持192K，96K解码
5. 立体声耳机功放支持无电容的耳机模式

A13的疑似存在的TV接口部分，直接照搬A20的设计，就是一个简易的CVBS视频信号滤波器。
麦克信号与TV信号通过一个选择电阻来选通。
耳机座的连线使用常用的4段耳机插头的线序。

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/1978974.jpg)

## 四.USB接口设计

### USB OTG接口

USB OTG接口既可以连接到电脑来取电，又可以连接一些外设来扩展功能。
为了防止作为主机使用时外部取电过大，造成电源损坏，所以在USB_VBUS和5V电源间加SY6280来限流保护

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/70159266.jpg)

### USB HOST接口

为了方便荔枝板的网络通信，这里占用USB HOST口来连接wifi/BT模块；需要接usb外设的可以考虑使用otg口来接外设。
同时也留下了USB母口的封装复用，需要外接hub的可以选择焊接USB母口。

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/72144360.jpg)

## 五.其它

**LRADC**的按键接口，A13的LRADC为6bit精度，可以如下图级联扩展多个按键。
下图的按键兼具开机BOOT选择（开机按下进入FEL更新程序），和安卓HOME键功能。

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/65894295.jpg)

应网友要求，增加了RGB LED方便指示工作状态。

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-26/50848599.jpg)
