# 主控芯片概览

## 〇.背景

本文所属目录层次为：

```
-> 1.硬件设计
	-> 1.原理图设计
		-> 1.主控芯片概览
```

主要介绍A13主控芯片的基本特性，引脚分布情况，并进行初步的引脚复用功能选择。

## 一.A13基本特性

A13是全志在2012年推出的Cortex-A8内核的微处理器，采用55nm工艺，主要是面向平板电脑的解决方案，目前最高支持到安卓4.2。

下面简要摘抄翻译datasheet记录的特性，欢迎对下面特性的补充说明或吐槽~

### 1.CPU

　　ARM **Cortex-A8**内核，32KB ICache,32KB DCache, 256KB L2 Cache

　　无聊地和一些常用芯片做对比(～￣▽￣)～

```eval_rst
====================== ============================ ======================= ========================= ======================== ========================
  芯片                             内核                        核心数                   主频                      L1(KB)                    L2(KB)
====================== ============================ ======================= ========================= ======================== ========================
STM32F779                      Cortex-M7                        1                     0.2GHz                   16+16                       n/a
S3C2440                        ARM920T                          1                     0.4GHz                   32+32                       n/a
MT7620                         MIPS24KEc                        1                     0.6GHz                   64+32                       n/a
BCM2835                        ARM1176JZ                        1                     0.7GHz                   16+16                       128
全志A13                        Cortex-A8                         1                     1GHz                     32+32                       256
全志H3                         Cortex-A7                         4                     1.5GHz                 (32+32)*4                     512
RK3288                         Cortex-A17                       4                     1.8GHz                  (32+32)*4                    1024
====================== ============================ ======================= ========================= ======================== ========================
```

### 2.GPU

　　**Mali400**, 支持Open GL ES 1.1/2.0 和open VG1.1

### 3.VPU

　　解码：支持 VP6/8,AVS,H.264,H.263, MPEG-1/2/4等，**1920x1080@30fps**

　　编码：支持H.264编码，**1920x1080@30fps**

### 4.图像输入输出

　　**并行RGB**接口，最大1024x600貌似?待后期测试。

   //R8还有一个CVBS(AV)输出,A13疑似也有（Pin99，可疑的NC）

　　摄像头接口**CSI**

### 5.存储

　　**16位 DDR2/DDR3**控制器，最高533MHz，最大**512MB**
　　8位Nand Flash控制器

### 6.外设

　　//注意以下有很多被复用的。。

　　USB2.0 OTGx1, USB2.0 Hostx1

　　SD3.0控制器x3，支持UHS-1,eMMC 4.3

　　UARTx4

　　SPIx3

　　I2Cx3

　　红外发射接收（CIR）

　　6bit LRADC （键盘）

　　电阻屏控制器，支持两点触摸

　　内置24bit音频编码器，支持双通道耳机和单通道mic

　　PWM控制器（屏幕背光）

### 7.系统

　　8通道普通DMA，8通道专用DMA

　　片上**48KB SRAM**（可以当单片机玩了，科科）

　　6个异步计数器，2个同步计数器，1个看门狗，1个AVS计数器

　　支持一些硬件加密算法DES/3DES/AES,摘要算法SHA-1，MD5

　　128-bit芯片ID

### 8.封装

　　**eLQFP176**, 喜闻乐见少数可以手焊的cortex-a芯片
　　但是尺寸达到了22mm见方。。

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-2/10940713.jpg)

### 9.系统功能框图

　　如下是典型应用框图
![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-2/74561632.jpg)

## 二.A13引脚分布

为方便查找引脚，我将A13的引脚整理到xls里，可以从下面链接里下载查阅
[引脚查找](https://github.com/Zepan/ilichee/raw/master/%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/A13%E5%BC%95%E8%84%9A%E6%95%B4%E7%90%86.xlsx)

直观起见，我直接在原理图上标出了引脚功能分布图（其中'/'表示复用）

这样看起来是不是感觉很清晰了呢？
![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-2/39652130.jpg)

在这里主要确定下启动存储接口：

　　虽然A13芯片硬件支持从SDC0/2,Nand,SPI0,USB启动，但实际上在SDK里支持得比较好的启动方式是SDC0和Nand，其它方式启动将需要修改大量文件，所以选定SDC0作为启动存储接口。

确认了启动接口后，初步的功能引脚分配就出来了：

### 荔枝板初步功能引脚分配

```eval_rst
======================  ====================== =======================
   功能                     端口引脚                 备注
======================  ====================== =======================
   SDC0                     PF0~5                    系统启动接口，SD卡启动
   SDC2                     PC6~11                   第二SD卡(四线)接口      
   USB0                     \-                        USB OTG，可USB升级固件      
   USB1                     \-                        USB Host，拟接wifi/BT模块   
   RGB LCD                  PD2~27                   接RGB LCD显示屏         
   CSI/SPI2                 PE0~11                   主功能摄像头接口，不接时可使用SPI2   
   SPI0                     PC0~3                    \-                       
   SPI1/UART3               PG9~12                   带CTS/RTS的UART3和SPI1复用   
   UART1                    PG3~4                    默认的系统调试信息输出口   
   I2C0                     PB0~1                    默认接PMU               
   I2C1                     PB15~16                  \-                       
   I2C2                     PB17~18                  \-                       
   IR_TX/RX                 PB3~4                    红外发射、接收口        
   PWM                      PB2                      默认LCD背光控制         
   HeadPhone,Mic            \-                        耳机，麦克音频接口      
   TPX/Y                    \-                        触摸屏接口              
   LRADC                    \-                        低精度ADC，用于键盘输入   
   TV_OUT                   Pin99                    疑似CVBS输出            
   GPIO                 PC4~5,PC12~15,PG0~2	      约9个剩余IO
======================  ====================== =======================
```

现在已经对A13功能引脚有了初步的认识，下面就可以逐个按照功能模块画原理图啦!

我使用的画板工具是比较简单易上手的altium designer 2016（试用版），虽然在高速电路设计时AD可能不太严谨，但对于1GHz以内的简单板子，AD还是绰绰有余的。

另外，AD16新增的一些特性对于DDR等高速布线很有帮助。

这里首先对整个板子的上层结构进行一下规划：

### 荔枝板上层原理图规划

![](http://7xvwj0.com1.z0.glb.clouddn.com/16-7-24/57728630.jpg)

如上图所示，整个板子将大致分为4张原理图，CPU，电源，存储，多媒体。

下节将先从电源部分开始画原理图，介绍A13专用PMU芯片AXP209的使用。
